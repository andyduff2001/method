<div class="container categories">
	<div class="row col-md-12">
		<div class="col-sm-3 col-lg-2 vn-faceted-search"
			 ng-class="{ isMobileAndVisible: true == isMobileAndVisible }"
				data-ng-hide="!hasFacetsOrCategories">
			<h3 data-ng-show="!showMobileSearch">Narrow By</h3>
			<div faceted-search
				 categories="categoryList"
				 facets="facets"
				 data-ng-show="mobileDisplay"
				 class="vn-faceted-search-control">
			</div>
		</div>
		<div class="col-sm-9 col-lg-10 vn-category-product-tiles"
			 ng-class="{ 'isMobileAndHidden': true == !isMobileAndHidden }">
			<div class="content-top">
				<div class="page-header">
					<h1>{{category.name}}</h1>
					<img class="banner img img-responsive"
						 ng-hide="checkForFacetFilters()"
						 ng-src="{{category.bannerImgUrl}}">
					<div class="description" itemprop="description"
						 ng-hide="checkForFacetFilters()"
						 data-ng-bind-html="category.description | legacyLinkify | html"></div>
				</div>
			</div>

			<!-- Mobile Filtering & Sorting Controls -->
			<div class="mobile-filters" data-ng-hide="mobileDisplay" ng-class="{ isMobileAndVisible: true == isMobileAndVisible }">
				<a href data-ng-click="toggleSearch()">
					<button class="btn btn-default vn-facet-search-control">Show Filters</button>
				</a>
				<!-- place sort by button here -->
			</div>


			<div class="row">
				<div class="-product-tile-animation col-sm-6 col-md-3" data-ng-repeat="product in products track by $index">
					<div class="th-product">
						<span class="th-product__sale" data-ng-show="product.isOnSale"></span>
						<span class="th-product__new" data-ng-show="product.isNew"></span>

						<div class="th-product__image">
							<!--<a ui-sref="i18n.product({ productTitle: product.seoFriendlyProductTitle, productCode: product.code })"> -->
							<a href="{{ product.url }}">
								<img data-ng-src="{{product.images.default[0].medium}}" class="img-responsive" alt="">
							</a>
						</div>
						<div class="th-product__name">
							<a href="{{ product.url }}">{{ product.name }}</a>
						</div>
						<div class="th-product__price">
							<span class="th-reg-price" data-ng-show="product.price.regularPrice > 0">
								<span class="th-price" data-ng-class="{strike: product.price.salePrice > 0}">{{product.price.regularPrice | currency}}</span>
								<span class="th-price-text th-text-left">Reg</span>
							</span>
							<span class="th-now-price" data-ng-show="product.price.salePrice > 0">
								<span class="th-price">{{product.price.salePrice | currency}}</span>
								<span class="th-price-text">Now</span>
							</span>
						</div>
						<!-- Todo: show available colors: but how does the client know which color to show for this product?
						<div class="th-colors-sm">
								<a href="#"><img src="/images/theme/sw-1-sm.png" class="img-responsive" alt=""></a>
								<a href="#"><img src="/images/theme/sw-2-sm.png" class="img-responsive" alt=""></a>
								<a href="#"><img src="/images/theme/sw-3-sm.png" class="img-responsive" alt=""></a>
								<a href="#"><img src="/images/theme/sw-4-sm.png" class="img-responsive" alt=""></a>
								<a href="#"><img src="/images/theme/sw-5-sm.png" class="img-responsive" alt=""></a>
						</div>
						-->
					</div>
				</div>
				<button class="btn btn-default btn-lg visible-xs th-load-more">Load More</button>
			</div>
 			<div vn-paginator cursor="cursor" current-page="currentPage" query-fn="queryProducts()"></div>
		</div>
	</div>
</div>
